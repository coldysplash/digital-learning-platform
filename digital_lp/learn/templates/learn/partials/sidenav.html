<div class="col-lg-3" id="sidebar">
  <div class="card shadow-sm">
    <div class="card-body p-3">
      <div class="d-flex align-items-center mb-4">
        <div class="flex-shrink-0">
          <img src="{{ course.image.url }}" alt="{{ course.name }}" class="rounded" width="60" height="60" style="object-fit: cover;" />
        </div>
        <div class="flex-grow-1 ms-3">
          <h6 class="mb-0">{{ course.name }}</h6>
          <p class="text-muted small mb-0">{{ course.author.name }}</p>
        </div>
      </div>

      <div class="progress mb-4" style="height: 8px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>

      {% for module in module_list %}
        <div class="sidebar-section">
          <h6 class="sidebar-section-title"><i class="fas fa-folder me-1"></i>Модуль {{ module.order }}: {{ module.name }}</h6>

          {% for lesson in lessons %}
            {% if lesson.module.id == module.id %}
              <button hx-get="{% url 'learn:lesson' lesson.id %}" hx-push-url="true" hx-target="#main" hx-swap="outerHTML" class="sidebar-item"><i class="fas fa-book"></i>{{ lesson.title }}</button>
            {% endif %}
          {% endfor %}

          {% for test in tests %}
            {% if test.module.id == module.id %}
              <button hx-get="{% url 'learn:test' test.id %}" hx-push-url="true" hx-target="#main" hx-swap="outerHTML" class="sidebar-item"><i class="fas fa-tasks"></i>{{ test.title }}</button>
            {% endif %}
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>
